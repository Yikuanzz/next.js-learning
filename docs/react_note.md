# Chapter 1

## Web åº”ç”¨çš„æ„å»º

åœ¨æ„å»ºç°ä»£åº”ç”¨ç¨‹åºæ—¶ï¼Œéœ€è¦è€ƒè™‘çš„æ˜¯ï¼š

- ç”¨æˆ·ç•Œé¢ï¼šç”¨æˆ·å¦‚ä½•ä¸ç¨‹åºè¿›è¡Œäº¤äº’ã€‚
- è·¯ç”±ï¼šç”¨æˆ·å¦‚ä½•åœ¨åº”ç”¨ç¨‹åºçš„ä¸åŒéƒ¨åˆ†ä¹‹é—´å¯¼èˆªã€‚
- æ•°æ®è·å–ï¼šæ•°æ®æ‰€åœ¨çš„ä½ç½®ä»¥åŠå¦‚ä½•è·å–ã€‚
- æ¸²æŸ“ï¼šæ¸²æŸ“é™æ€æˆ–åŠ¨æ€å†…å®¹çš„æ—¶é—´å’Œä½ç½®ã€‚
- é›†æˆï¼šä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆç”¨äº CMSã€èº«ä»½éªŒè¯ã€æ”¯ä»˜ç­‰ï¼‰ä»¥åŠå¦‚ä½•è¿æ¥åˆ°å®ƒä»¬ã€‚
- åŸºç¡€è®¾æ–½ï¼šéƒ¨ç½²ã€å­˜å‚¨å’Œè¿è¡Œåº”ç”¨ç¨‹åºä»£ç ï¼ˆæ— æœåŠ¡å™¨ã€CDNã€è¾¹ç¼˜ç­‰ï¼‰çš„åœ°æ–¹ã€‚
- æ€§èƒ½ï¼šå¦‚ä½•ä¸ºæœ€ç»ˆç”¨æˆ·ä¼˜åŒ–åº”ç”¨ç¨‹åºã€‚
- å¯æ‹“å±•æ€§ï¼šåº”ç”¨ç¨‹åºå¦‚ä½•éšç€å›¢é˜Ÿã€æ•°æ®å’Œæµé‡çš„å¢é•¿è€Œé€‚åº”
- å¼€å‘ä½“éªŒï¼šå›¢é˜Ÿåœ¨æ„å»ºå’Œç»´æŠ¤åº”ç”¨ç¨‹åºæ–¹é¢çš„ç»éªŒã€‚

## ä»€ä¹ˆæ˜¯ Reactï¼Ÿ

React æ˜¯ä¸€ä¸ª JavaScript åº“ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ã€‚

React å…è®¸ä½ åˆ›å»ºå…·æœ‰ interactivity çš„åŠ¨æ€ç”¨æˆ·ç•Œé¢ï¼Œè¿™äº›ç•Œé¢å¯ä»¥åŠ¨æ€åœ°æ›´æ–°ï¼Œè€Œä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚

æˆ‘ä»¬æ‰€è¯´çš„åº“æ˜¯æŒ‡ React æä¾›æœ‰ç”¨çš„å‡½æ•° ï¼ˆAPIï¼‰ æ¥æ„å»º UIï¼Œä½†å°†å…¶ç•™ç»™å¼€å‘äººå‘˜åœ¨ä»–ä»¬çš„åº”ç”¨ç¨‹åºä¸­å¦‚ä½•ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚

![alt text](./img/react.png)

## ä»€ä¹ˆæ˜¯ Next.jsï¼Ÿ

Next.js æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå…¨æ ˆ JavaScript åº”ç”¨ç¨‹åºçš„ React æ¡†æ¶ã€‚

æ¡†æ¶æ˜¯æŒ‡ Next.js å¤„ç† React æ‰€éœ€çš„å·¥å…·å’Œé…ç½®ï¼Œå¹¶ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæä¾›é¢å¤–çš„ç»“æ„ã€åŠŸèƒ½å’Œä¼˜åŒ–ã€‚

![alt text](./img/nextjs.png)

# Chapter 2

## ä»€ä¹ˆæ˜¯ DOMï¼Ÿ

DOMï¼ˆDocument Object Modelï¼‰æ˜¯ HTML å’Œ XML æ–‡æ¡£çš„ç¼–ç¨‹æ¥å£ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ DOM æ–¹æ³•å’Œ JavaScript æ¥ç›‘å¬ç”¨æˆ·äº‹ä»¶ï¼Œå¹¶é€šè¿‡åœ¨ç”¨æˆ·ç•Œé¢ä¸­é€‰æ‹©ã€æ·»åŠ ã€æ›´æ–°å’Œåˆ é™¤ç‰¹å®šå…ƒç´ æ¥æ“ä½œ DOMã€‚

![alt text](./img/dom.png)

# Chapter 3

## ç”¨ JavaScript æ›´æ–° UI

```html
<html>
  <body>
    <div id="app"></div>
    <script type="text/javascript">
      // è·å– id ä¸º app çš„å…ƒç´ 
      const app = document.getElementById("app");
      // åˆ›å»º h1 å’Œ text æ ‡ç­¾
      const header = document.createElement("h1");
      const text = "Develope. Preview. Ship. ğŸš€";
      const headerContent = document.createTextNode(text);
      header.appendChild(headerContent);
      // å°†æ ‡ç­¾æ·»åŠ åˆ° app ä¸­
      app.appendChild(header);
    </script>
  </body>
</html>
```

## å‘½ä»¤å¼ç¼–ç¨‹ä¸å£°æ˜å¼ç¼–ç¨‹

å‘½ä»¤å¼ç¼–ç¨‹ï¼šä»¥å‘½ä»¤çš„å½¢å¼ç¼–å†™ç¨‹åºï¼Œå‘Šè¯‰è®¡ç®—æœºå¦‚ä½•æ‰§è¡Œä»»åŠ¡ã€‚
å£°æ˜å¼ç¼–ç¨‹ï¼šä»¥å£°æ˜çš„å½¢å¼ç¼–å†™ç¨‹åºï¼Œå‘Šè¯‰è®¡ç®—æœºè¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚

ä¸Šé¢çš„ä»£ç æ˜¯ `å‘½ä»¤å¼ç¼–ç¨‹` ï¼Œä½†æ˜¯ï¼Œåœ¨æ„å»ºç”¨æˆ·ç•Œé¢æ—¶ï¼Œé€šå¸¸é¦–é€‰ `å£°æ˜å¼æ–¹æ³•` ï¼Œå› ä¸ºå®ƒå¯ä»¥åŠ å¿«å¼€å‘è¿‡ç¨‹ã€‚å¦‚æœå¼€å‘äººå‘˜èƒ½å¤Ÿå£°æ˜ä»–ä»¬æƒ³è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œè€Œä¸æ˜¯ç¼–å†™ DOM æ–¹æ³•ï¼Œé‚£å°†ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚

æ¢å¥è¯è¯´ï¼Œå‘½ä»¤å¼ç¼–ç¨‹å°±åƒç»™å¨å¸ˆåˆ†æ­¥æŒ‡å¯¼å¦‚ä½•åˆ¶ä½œæŠ«è¨ã€‚å£°æ˜å¼ç¼–ç¨‹å°±åƒè®¢è´­æŠ«è¨ï¼Œè€Œä¸å…³å¿ƒåˆ¶ä½œæŠ«è¨æ‰€éœ€çš„æ­¥éª¤ã€‚ğŸ•

React å°±æ˜¯ä¸€ä¸ªæµè¡Œçš„å£°æ˜å¼åº“ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ„å»ºç”¨æˆ·ç•Œé¢ã€‚

# Chapter 4

## React å…¥é—¨

```html
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

<scirpt>
  const app = document.getElementById('app'); const root =
  ReactDOM.createRoot(app); root.render(
  <h1>Hello React!</h1>
  );
</scirpt>
```

é€šè¿‡ `ReactDOM.createRoot()` åˆ›å»ºæ ¹å…ƒç´ ï¼Œç„¶åä½¿ç”¨ `root.render()` å°†å†…å®¹æ¸²æŸ“åˆ°æ ¹å…ƒç´ ä¸­ã€‚

ç„¶è€Œä¸Šé¢çš„ä»£ç æ˜¯ä¸èƒ½è¿è¡Œçš„ï¼Œå› ä¸º `<h1>...</h1>` æ˜¯æ— æ•ˆçš„ JavaScriptï¼Œè¿™æ®µä»£ç å…¶å®æ˜¯ `JSX`ã€‚

## ä»€ä¹ˆæ˜¯ JSX

JSX æ˜¯ JavaScript çš„è¯­æ³•æ‹“å±•ï¼Œå…è®¸ç”¨ç±»ä¼¼ HTML çš„è¯­æ³•æ¥æè¿° UIã€‚å®ƒéœ€è¦éµå¾ªä¸‰ä¸ªè§„åˆ™ï¼š
**1ã€è¿”å›å•ä¸ªæ ¹å…ƒç´ ï¼š** è¦ä»ç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ï¼Œè¯·ä½¿ç”¨å•ä¸ª parent æ ‡ç­¾åŒ…è£…å®ƒä»¬ã€‚

```html
<div>
  <h1>Hedy Lamarr's Todos</h1>
  <img src="https://i.imgur.com/yXOvdOSs.jpg" alt="Hedy Lamarr" class="photo" />
  <ul>
    ...
  </ul>
</div>
```

å¦‚æœä¸æƒ³æ·»åŠ é¢å¤–çš„ `<div>` å¯ä»¥æ”¹ä¸º `<>` å’Œ `</>`ã€‚

**2ã€å…³é—­æ‰€æœ‰æ ‡ç­¾ï¼š** JSX è¦æ±‚æ ‡ç­¾æ˜ç¡®å…³é—­ï¼šåƒ `<img>` è¿™æ ·çš„è‡ªé—­åˆæ ‡ç­¾å¿…é¡»å†™æˆ `<img />`ï¼Œåƒ `<li>oranges` è¿™æ ·çš„åŒ…è£…æ ‡ç­¾å¿…é¡»å†™æˆ `<li>oranges</li>`ã€‚

**3ã€é©¼å³°æ‰€æœ‰å¤§å†™å±æ€§åï¼š** `class` å±æ€§å¿…é¡»å†™æˆ `className`ï¼Œ`tabindex` å±æ€§å¿…é¡»å†™æˆ `tabIndex`ã€‚

## å°† Babel æ·»åŠ åˆ°é¡¹ç›®ä¸­

å› ä¸º JSX æ˜¯ JavaScript çš„è¯­æ³•æ‹“å±•ï¼Œæ‰€ä»¥å®ƒéœ€è¦ä¸€ä¸ªç¼–è¯‘å™¨æ‰èƒ½è¿è¡Œã€‚ä¸ºäº†åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ JSXï¼Œæˆ‘ä»¬éœ€è¦å°† Babel æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚

```html
<!-- æ·»åŠ  babel ç¼–è¯‘å™¨ -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- å°†è„šæœ¬ç±»å‹æ”¹ä¸º type=text/jsx -->
<script type="text/jsx">
  const domNode = document.getElementById("app")
  const root = ReactDOM.createRoot(domNode);
  root.render(<h1>Develop. Preview. Ship.ğŸš€</h1>);
</script>
```

## React çš„åŸºæœ¬ JavaScript

### **1ã€å‡½æ•°å’Œç®­å¤´å‡½æ•°**

å‡½æ•°ç”¨ `function` å…³é”®å­—è¿›è¡Œå£°æ˜ï¼š

```js
// JS çš„ä¼ é€’æ˜¯ ä¼ é€’æŒ‡é’ˆ
function square(number) {
  return number * number;
}
```

å‡½æ•°ä¹Ÿå¯ä»¥ç”¨ **å‡½æ•°è¡¨è¾¾å¼** æ¥åˆ›å»ºï¼Œæ„å‘³ç€å®ƒæ˜¯åŒ¿åçš„ï¼Œä¸å¿…è¦æ‹¥æœ‰åç§°ï¼š

```js
const square = function (number) {
  return number * number;
};
```

å‡½æ•°è¡¨è¾¾å¼å¾ˆé€‚åˆæŠŠå‡½æ•°ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼š

```js
function map(f, a) {
  const result = new Array(a.length);
  for (let i = 0; i < a.length; i++) {
    result[i] = f(a[i]);
  }
  return result;
}
```

å†…éƒ¨å‡½æ•°å½¢æˆä¸€ä¸ª **é—­åŒ…** ï¼šå®ƒå¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•°å’Œå˜é‡ï¼Œä½†æ˜¯å¤–éƒ¨å‡½æ•°å´ä¸èƒ½ä½¿ç”¨ä»–çš„å‚æ•°å’Œå˜é‡ã€‚

```js
function outside(x) {
  function inside(y) {
    return x + y;
  }
  return inside;
}
const fnInside = outside(3); // å¯ä»¥è¿™æ ·æƒ³ï¼šç»™æˆ‘ä¸€ä¸ªå¯ä»¥å°†æä¾›çš„å€¼åŠ ä¸Š 3 çš„å‡½æ•°
console.log(fnInside(5)); // 8
console.log(outside(3)(5)); // 8
```

å®é™…ä¸Šï¼Œé—­åŒ…çš„ä½¿ç”¨ä¼šå¤æ‚ä¸€äº›äº›ï¼Œæ¯”å¦‚å®ƒå¯ä»¥è¿”å›ä¸€ä¸ªåŒ…å«ç”¨æˆ·æ“ä½œå¤–éƒ¨å‡½æ•°çš„å†…éƒ¨å‡½æ•°å˜é‡æ–¹æ³•çš„å¯¹è±¡ã€‚

```js
const creatPet = function (name) {
  let sex;

  const pet = {
    setName(newName) {
      name = newName;
    },
    getName() {
      return name;
    },
    getSex() {
      return sex;
    },
    getSex() {
      return sex;
    },
    setSex(newSex) {
      if (
        typeof newSex === "string" &&
        (newSex.toLowerCase() === "male" || newSex.toLowerCase() === "female")
      ) {
        sex = newSex;
      }
    },
  };
  return pet;
};

const pet = creatPet("Vicky");
console.log(pet.getName()); // Vicky

pet.setName("Hal");
pet.setSex("female");
const.log(pet.getName());   // Hal
console.log(pet.getSex());  // female
```

å‡½æ•°çš„å®é™…å‚æ•°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„ `arguements` å¯¹è±¡ä¸­ï¼š

```js
function myConcat(separator) {
  let res = "";
  for (let i = 1; i < arguments.length; i++) {
    res += arguments[i] + separator;
  }
  return res;
}

console.log(myConcat("ã€", "çº¢", "æ©™", "è“"));
// "çº¢ã€æ©™ã€è“ã€"

console.log(myConcat("ï¼›", "å¤§è±¡", "é•¿é¢ˆé¹¿", "ç‹®å­", "çŒè±¹"));
// "å¤§è±¡ï¼›é•¿é¢ˆé¹¿ï¼›ç‹®å­ï¼›çŒè±¹ï¼›"

console.log(myConcat("ã€‚", "æ™ºè€…", "ç½—å‹’", "ç‰›è‡³", "èƒ¡æ¤’", "é¦™èœ"));
// "æ™ºè€…ã€‚ç½—å‹’ã€‚ç‰›è‡³ã€‚èƒ¡æ¤’ã€‚é¦™èœã€‚"
```

å…³äºå‡½æ•°çš„å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰å°±æ˜¯ `undefined`ï¼Œè¿™é‡Œå…è®¸ç”¨å‰©ä½™å‚æ•°æ”¶é›†å¤šä¸ªå‚æ•°ï¼š

```js
function multiply(multiplier, ...theArgs) {
  return theArgs.map((x) => multiplier * x);
}

const arr = multiply(2, 1, 2, 3);
console.log(arr); // [2, 4, 6]
```

**ç®­å¤´å‡½æ•°** æ˜¯ä¸€ç§ç®€å†™ï¼Œå®ƒæ²¡æœ‰è‡ªå·±çš„ `this`ï¼Œ`arguments`ï¼Œ`super`ï¼Œ`new.target`ï¼Œæˆ–è€… `prototype`ã€‚

```js
const a = ["Hydrogen", "Helium", "Lithium", "Beryllium"];
const a2 = a.map(function (s) {
  return s.length;
});

console.log(a2);

const a3 = a.map((s) => s.length);
console.log(a3);
```

å› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ `this`ï¼Œå› æ­¤ä½¿ç”¨çš„æ˜¯ä¸Šä¸‹æ–‡çš„ `this`ï¼Œæ³¨æ„è¿™é‡Œè¦æ˜¾ç¤ºåœ°å£°æ˜ï¼š

```js
function Persion() {
  this.age = 0;

  setInterval(() => {
    this.age++;
  }, 100);
}

const p = new Person();
```

### **2ã€Object ç±»å‹**

`Object` æ˜¯ JavaScript çš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨å„ç§é”®å€¼é›†åˆå’Œå¤æ‚å®ä½“ã€‚

äº‹å®æ˜¯ JavaScript ä¸­ï¼Œå‡ ä¹æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ `Object` çš„å®ä¾‹ã€‚æœ€å…³é”®çš„æ˜¯ï¼š `Object.prototype` çš„åŸå‹å§‹ç»ˆä¸º `null` ä¸”ä¸å¯æ›´æ”¹ã€‚å¹¶ä¸”ï¼Œæœ€å¥½åˆ«ç”¨åŸå‹çš„æ–¹æ³•ã€‚

æ„é€ ç©ºå¯¹è±¡ï¼š

```js
const o1 = new Object();
const o2 = new Object(undefined);
const o3 = new Object(null);
```

**3ã€è§£æ„èµ‹å€¼**
è§£æ„èµ‹å€¼æ˜¯ JavaScript çš„ä¸€ç§è¯­æ³•ï¼Œå®ƒå…è®¸æˆ‘ä»¬é€šè¿‡è§£æ„èµ‹å€¼æ¥ä¸ºå˜é‡èµ‹å€¼ï¼Œè€Œä¸ç”¨å†ä½¿ç”¨ `.` è®¿é—®å±æ€§ã€‚

```js
const x = [1, 2, 3, 4, 5];
const [y, z] = x;
console.log(y); // 1
console.log(z); // 2

const obj = { a: 1, b: 2 };
const { a, b } = obj;
```

æ¯ä¸ªè§£æ„å±æ€§éƒ½å¯ä»¥æœ‰ **é»˜è®¤å€¼**ï¼š

```js
const [a = 1] = []; // a is 1
// å±æ€§ä¸å­˜åœ¨æˆ–ä¸º undefined æ—¶ï¼Œç”¨é»˜è®¤å€¼
const { b = 2 } = { b: undefined }; // b is 2
// å±æ€§å€¼ä¸º null æ—¶ï¼Œä¸ç”¨é»˜è®¤å€¼
const { c = 2 } = { c: null }; // c is null
```

å¦‚æœæˆ‘ä»¬ä½¿ç”¨å‰©ä½™å±æ€§çš„åŒ–ï¼Œåˆ™ä¼šæŠŠæ‰€æœ‰å‰©ä½™å±æ€§å­˜å…¥æ–°çš„å¯¹è±¡æˆ–æ•°ç»„ä¸­ï¼š

```js
const { a, ...others } = { a: 1, b: 2, c: 3 };
console.log(others); // { b: 2, c: 3 }

const [first, ...others2] = [1, 2, 3];
console.log(others2); // [2, 3]
```

å¦å¤–ï¼Œå¯ä»¥åœ¨è§£æ„è¡¨è¾¾å¼ä¸­äº¤æ¢å˜é‡çš„å€¼ï¼š

```js
let a = 1;
let b = 3;

[a, b] = [b, a];
console.log(a); // 3
console.log(b); // 1

const arr = [1, 2, 3];
[arr[2], arr[1]] = [arr[1], arr[2]];
console.log(arr); // [1, 3, 2]
```

å¦‚æœä¸æƒ³è¦æŸäº›å±æ€§ï¼Œå¯ä»¥å¿½ç•¥ï¼š

```js
function f() {
  return [1, 2, 3];
}

const [a, , b] = f();
console.log(a); // 1
console.log(b); // 3

const [c] = f();
console.log(c); // 1
```

æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥è·å–è¿­ä»£å™¨çš„å…ƒç´ ï¼š

```js
const obj = {
  *[Symbol.iterator]() {
    for (const v of [0, 1, 2, 3]) {
      console.log(v);
      yield v;
    }
  },
};
const [a, b, ...rest] = obj; // Logs 0 1 2 3
console.log(rest); // [2, 3] (an array)
```

é‡è¦çš„ä¸€ä¸ªåº”ç”¨æ˜¯ï¼Œå¯ä»¥æŠŠå‡½æ•°å‚æ•°å¯¹è±¡çš„å±æ€§æå–å‡ºæ¥ï¼š

```js
const user = {
  id: 42,
  displayName: "jdoe",
  fullName: {
    firstName: "Jane",
    lastName: "Doe",
  },
};

// æå– id
function userId({ id }) {
  return id;
}
console.log(userId(user)); // 42

// æå– displayName
function userDisplayName({ displayName: dname }) {
  return dname;
}
console.log(userDisplayName(user)); // `jdoe`
```

**3ã€æ¨¡æ¿å­—ç¬¦ä¸²**

**æ¨¡æ¿å­—é¢é‡** æ˜¯ç”¨åå¼•å·åŒ…è£¹çš„å­—ç¬¦ä¸²ï¼Œå…è®¸å¤šè¡Œå­—ç¬¦ä¸²ã€å¸¦åµŒå…¥è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æ’å€¼å’Œä¸€ç§å«å¸¦æ ‡ç­¾çš„æ¨¡æ¿çš„ç‰¹æ®Šç»“æ„ã€‚

å¦‚æœè½¬ä¹‰å­—é¢é‡ä¸­æœ‰åå¼•å·ï¼Œå¯ä»¥åœ¨å‰é¢åŠ ä¸€ä¸ª `\`ï¼Œç¾å…ƒç¬¦å·ä¹Ÿå¯ä»¥è¢«è½¬ä¹‰ï¼š

```js
`\`` === "`"; // true
`\${1}` === "${1}"; // true
```

**å¤šè¡Œå­—ç¬¦ä¸²ï¼š**

```js
console.log(`string text line 1
string text line 2`);
// "string text line 1
// string text line 2"
```

**å­—ç¬¦ä¸²æ’å€¼ï¼š**

```js
const a = 5;
const b = 10;
console.log(`Fifteen is ${a + b} and
not ${2 * a + b}.`);
// "Fifteen is 15 and
// not 20."
```

**åµŒå¥—æ¨¡æ¿å­—é¢é‡ï¼š**

```js
const classes = `header ${
  isLargeScreen() ? "" : `icon-${item.isCollapsed ? "expander" : "collapser"}`
}`;
```

### **4ã€æ¨¡å—**

**å¯¼å‡ºæ¨¡å—åŠŸèƒ½ï¼š** ä¸ºäº†è·å¾—æ¨¡å—åŠŸèƒ½ï¼Œå°±è¦ç”¨ `export` å°†å®ƒä»¬å¯¼å‡ºã€‚

```js
export const name = "square";

export function draw(ctx, length, x, y, color) {
  ctx.fillStyle = color;
  ctx.fillRect(x, y, length, length);

  return {
    length: length,
    x: x,
    y: y,
    color: color,
  };
}
```

**å¯¼å…¥åŠŸèƒ½åˆ°è„šæœ¬ï¼š** æƒ³åœ¨æ¨¡å—å¤–é¢ä½¿ç”¨ä¸€äº›åŠŸèƒ½ï¼Œé‚£ä½ å°±éœ€è¦å¯¼å…¥ä»–ä»¬æ‰èƒ½ä½¿ç”¨ã€‚

```js
import {
  name,
  draw,
  reportArea,
  reportPerimeter,
} from "/js-examples/modules/basic-modules/modules/square.js";
```

# Chapter 5

## æ ¸å¿ƒæ¦‚å¿µï¼šComponentes

ç”¨æˆ·ç•Œé¢å¯ä»¥åˆ†è§£ä¸ºæ›´å°çš„æ„å»ºå—ï¼Œå°±æ˜¯ **ç»„ä»¶**ã€‚

ç»„ä»¶ç›¸å½“äºä¹é«˜ç§¯æœ¨ï¼Œå¯ä»¥å°†å•ç‹¬çš„ç§¯æœ¨ç»„åˆåœ¨ä¸€èµ·å½¢æˆæ›´å¤§çš„ç»“æ„ã€‚

![alt text](./img/component.png)

```js
<script type="text/jsx">
    const app = document.getElementById("app")

    // åˆ›å»ºç»„ä»¶, ç»„ä»¶åº”è¯¥å¤§å†™
    function Header(){
        // ç›´æ¥è¿”å› UI ç»„ä»¶
        return <h1> Develop. Preview. Ship.ğŸš€</h1>
    }
    const root = ReactDOM.createRoot(app);
    // ç”¨å°–æ‹¬å·æ¥ä½¿ç”¨ç»„ä»¶
    root.render(<Header />);
</script>
```

å½“æˆ‘ä»¬å¯¹ç»„ä»¶è¿›è¡ŒåµŒå¥—åï¼Œé‚£ä¹ˆæŠŠæœ€é¡¶å±‚çš„ç»„ä»¶ç»™åˆ°æ ¹ç»„ä»¶è¿›è¡Œæ¸²æŸ“å°±å¯ä»¥äº†ï¼š

```js
<script type="text/jsx">
    const app = document.getElementById("app")

    // åˆ›å»ºç»„ä»¶, ç»„ä»¶åº”è¯¥å¤§å†™
    function Header(){
        // ç›´æ¥è¿”å› UI ç»„ä»¶
        return <h1> Develop. Preview. Ship.ğŸš€</h1>
    }

    function HomePage(){
        return <div> <Header /> </div>
    }
    const root = ReactDOM.createRoot(app);
    // ç”¨å°–æ‹¬å·æ¥ä½¿ç”¨ç»„ä»¶
    root.render(<HomePage />);
</script>
```

## æ ¸å¿ƒæ¦‚å¿µï¼šProps

å¦‚æœæˆ‘ä»¬æƒ³è¦ç»„ä»¶æ˜¾ç¤ºä¸åŒçš„å†…å®¹ï¼Œé‚£ä¹ˆå°±éœ€è¦å‘ç»„ä»¶ä¼ é€’å‚æ•°ã€‚è¿™äº›ä¿¡æ¯å±æ€§å°±æ˜¯ `props`ã€‚

```js
function HomePage() {
  <div>
    <Header title="React" />
  </div>;
}

// props å¯¹è±¡è¿”å›ï¼š { title: "React" }
function Header({ title }) {
  return <h1> {title} Develop. Preview. Ship.ğŸš€</h1>;
}
```

äº‹å®ä¸Šï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šç§æ–¹æ³•ä½¿ç”¨ props ä¸­çš„å±æ€§ï¼š

```js
// ç”¨ç‚¹è¡¨ç¤º
function Header(props) {
  return <h1>{props.title}</h1>;
}

// æ¨¡æ¿æ–‡æœ¬
function Header({ title }) {
  return <h1>{`Cool ${title}`}</h1>;
}

// å‡½æ•°è¿”å›å€¼
function createTitle(title) {
  if (title) {
    return title;
  } else {
    return "Default title";
  }
}

function Header({ title }) {
  return <h1>{createTitle(title)}</h1>;
}

// ä¸‰å…ƒè¿ç®—
function Header({ title }) {
  return <h1>{title ? title : "Default Title"}</h1>;
}
```

éå†åˆ—è¡¨ï¼š

```js
function HomePage() {
  const names = ["Ada Lovelace", "Grace Hopper", "Margaret Hamilton"];

  return (
    <div>
      <Header title="Hello React" />
      // é€šè¿‡ map è¿­ä»£æ•°ç»„
      <ul>
        {names.map((name) => (
          <li key={name}>{name}</li>
        ))}
      </ul>
    </div>
  );
}
```

## æ ¸å¿ƒæ¦‚å¿µï¼šState

```js
function handleClick() {
  alert("Increment like count");
}

return (
  <div>
    <Header title="React" />
    <ul>
      {names.map((name) => (
        <li key={name}>{name}</li>
      ))}
    </ul>

    <button onClick={handleClick}>Like</button>
  </div>
);
```

React ä¸­æœ‰ä¸€ç»„ç§°ä¸º **hooks** çš„å‡½æ•°ï¼Œä»–å…è®¸ä½ å‘ç»„ä»¶æ·»åŠ é¢å¤–çš„é€»è¾‘ï¼Œæ¯”å¦‚ stateã€‚æˆ‘ä»¬å¯ä»¥å°† state è§†ä¸º UI ä¸­éšæ—¶é—´å˜åŒ–çš„ä»»ä½•ä¿¡æ¯ï¼Œé€šå¸¸ç”±ç”¨æˆ·äº¤äº’è§¦å‘ã€‚

![alt text](./img/state.png)

æˆ‘ä»¬å¯ä»¥ç”¨ state æ¥å­˜å‚¨å’Œå¢åŠ ç”¨æˆ·å•å‡» â€œLikeâ€ çš„è¾ä¹¦ï¼Œäº‹å®ä¸Šç”¨äºç®¡ç† state çš„ React é’©å­æ˜¯ï¼š `useState()` å®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ã€‚

- ç¬¬ä¸€é¡¹æ˜¯å½“å‰çŠ¶æ€çš„å€¼ï¼›
- ç¬¬äºŒé¡¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ›´æ–°çŠ¶æ€ã€‚

```js
function HomePage() {
  // ...
  const [likes, setLikes] = React.useState(0);

  function handleClick() {
    setLikes(likes + 1);
  }

  return (
    <div>
      {/* ... */}
      <button onClick={handleClick}>Likes ({likes})</button>
    </div>
  );
}
```

åœ¨ä½¿ç”¨ state æ—¶ï¼Œéœ€è¦æ³¨æ„å®ƒå¹¶ä¸ä¼šåœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶è‡ªåŠ¨æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»£ç æäº¤ååªæ˜¯è´Ÿè´£æ¸²æŸ“ã€‚

```js
import { useState } from "react";

export default function Counter() {
  const [score, setScore] = useState(0);

  function increment() {
    setScore(score + 1);
  }

  return (
    <>
      <button onClick={() => increment()}>+1</button>
      <button
        onClick={() => {
          increment();
          increment();
          increment();
        }}
      >
        +3
      </button>
      <h1>Score: {score}</h1>
    </>
  );
}
```

ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œç‚¹å‡» `button +3` å¹¶ä¸ä¼š +3 ï¼Œæƒ³è¦å®ç° +3 çš„æ•ˆæœï¼Œå°±è¦æ”¹ä¸º `setScore(s => s+1)`ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†çŠ¶æ€è¿›è¡Œæ’é˜Ÿã€‚

æ­¤å¤–ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¼šé‡åˆ°è¦é¢‘ç¹å¤åˆ¶å¯¹è±¡çš„æƒ…å†µï¼Œä¸€ç§æ–¹æ³•æ˜¯ç”¨ `...` æ¥è¿›è¡Œå¤åˆ¶ï¼š

```js
import { useState } from "react";

export default function Form() {
  const [person, setPerson] = useState({
    name: "Niki de Saint Phalle",
    artwork: {
      title: "Blue Nana",
      city: "Hamburg",
      image: "https://i.imgur.com/Sd1AgUOm.jpg",
    },
  });

  function handleNameChange(e) {
    setPerson({
      ...person,
      name: e.target.value,
    });
  }

  function handleTitleChange(e) {
    setPerson({
      ...person,
      artwork: {
        ...person.artwork,
        title: e.target.value,
      },
    });
  }
}
```

å¦ä¸€ç§ï¼Œæˆ‘ä»¬ç”¨ Immer è¿™æ ·çš„åº“æ¥å‡å°‘é‡å¤ä»£ç ï¼š

```js
import { useImmer } from 'use-immer';

export default function Form() {
  const [person, updatePerson] = useImmer({
    name: 'Niki de Saint Phalle',
    artwork: {
      title: 'Blue Nana',
      city: 'Hamburg',
      image: 'https://i.imgur.com/Sd1AgUOm.jpg',
    }
  });

  function handleNameChange(e) {
    updatePerson(draft => {
      draft.name = e.target.value;
    });
  }

  function handleTitleChange(e) {
    updatePerson(draft => {
      draft.artwork.title = e.target.value;
    });
  }
```

å¯¹äº state è€Œè¨€ï¼Œå®ƒä¸åº”è¯¥æœ‰å†—ä½™çš„å†…å®¹ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±å­˜åœ¨ä¸å¿…è¦çš„å†—ä½™ï¼š

```js
export default function Form() {
  const [firstName, setFirstName] = useState("");
  const [lastName, setLastName] = useState("");
  const [fullName, setFullName] = useState("");

  function handleFirstNameChange(e) {
    setFirstName(e.target.value);
    setFullName(e.target.value + " " + lastName);
  }

  function handleLastNameChange(e) {
    setLastName(e.target.value);
    setFullName(firstName + " " + e.target.value);
  }
  ...
}
```

æˆ‘ä»¬å¯ä»¥æŠŠ `fullName` æ‹¿å‡ºæ¥ï¼Œå› ä¸ºç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ä¼šå¯¹é‡æ–°è®¡ç®—çš„ï¼š

```js
export default function Form() {
  const [firstName, setFirstName] = useState("");
  const [lastName, setLastName] = useState("");

  const fullName = firstName + " " + lastName;

  function handleFirstNameChange(e) {
    setFirstName(e.target.value);
  }

  function handleLastNameChange(e) {
    setLastName(e.target.value);
  }
  ...
}
```

React å…è®¸ä½ è¦†ç›–é»˜è®¤è¡Œä¸ºï¼Œå¹¶é€šè¿‡å‘ç»„ä»¶ä¼ é€’ä¸åŒçš„é”®æ¥å¼ºåˆ¶ç»„ä»¶é‡ç½®å…¶çŠ¶æ€ï¼Œä¾‹å¦‚ `<Chat key={email} />`ã€‚è¿™å‘Šè¯‰ React å¦‚æœæ¥æ”¶è€…ä¸åŒï¼Œåˆ™åº”å°†å…¶è§†ä¸ºä¸åŒçš„ Chat ç»„ä»¶ï¼Œéœ€è¦ä½¿ç”¨æ–°æ•°æ®ï¼ˆä»¥åŠ UI ç­‰è¾“å…¥ï¼‰ä»å¤´å¼€å§‹é‡æ–°åˆ›å»ºã€‚

```js
import { useState } from "react";
import Chat from "./Chat.js";
import ContactList from "./ContactList.js";

export default function Messenger() {
  const [to, setTo] = useState(contacts[0]);
  return (
    <div>
      <ContactList
        contacts={contacts}
        selectedContact={to}
        onSelect={(contact) => setTo(contact)}
      />
      <Chat key={to.email} contact={to} />
    </div>
  );
}

const contacts = [
  { name: "Taylor", email: "taylor@mail.com" },
  { name: "Alice", email: "alice@mail.com" },
  { name: "Bob", email: "bob@mail.com" },
];
```

æˆ‘ä»¬å¯ä»¥å°†å¾ˆå¤šçš„äº‹ä»¶å¤„ç†å°è£…åˆ° `reducer` å‡½æ•°ä¸­ï¼Œæ­¤æ—¶æˆ‘ä»¬åªè¦å¯¹æ¯ä¸ªå˜é‡æŒ‡å®šåç§°å°±å¥½äº†ï¼Œå‰©ä¸‹çš„è¿›è¡Œé€»è¾‘å¤„ç†ï¼š

```js
import { useReducer } from "react";
import AddTask from "./AddTask.js";
import TaskList from "./TaskList.js";

export default function TaskApp() {
  const [tasks, dispatch] = useReducer(tasksReducer, initialTasks);

  function handleAddTask(text) {
    dispatch({
      type: "added",
      id: nextId++,
      text: text,
    });
  }

  function handleChangeTask(task) {
    dispatch({
      type: "changed",
      task: task,
    });
  }

  function handleDeleteTask(taskId) {
    dispatch({
      type: "deleted",
      id: taskId,
    });
  }

  return (
    <>
      <h1>Prague itinerary</h1>
      <AddTask onAddTask={handleAddTask} />
      <TaskList
        tasks={tasks}
        onChangeTask={handleChangeTask}
        onDeleteTask={handleDeleteTask}
      />
    </>
  );
}

function tasksReducer(tasks, action) {
  switch (action.type) {
    case "added": {
      return [
        ...tasks,
        {
          id: action.id,
          text: action.text,
          done: false,
        },
      ];
    }
    case "changed": {
      return tasks.map((t) => {
        if (t.id === action.task.id) {
          return action.task;
        } else {
          return t;
        }
      });
    }
    case "deleted": {
      return tasks.filter((t) => t.id !== action.id);
    }
    default: {
      throw Error("Unknown action: " + action.type);
    }
  }
}

let nextId = 3;
const initialTasks = [
  { id: 0, text: "Visit Kafka Museum", done: true },
  { id: 1, text: "Watch a puppet show", done: false },
  { id: 2, text: "Lennon Wall pic", done: false },
];
```

# Chapter 6

## å®‰è£… Next.js

åœ¨ index.html ç›®å½•ä¸‹ï¼Œåˆ›å»º `package.json` å¹¶å†™å…¥ç©ºå¯¹è±¡ `{}`ã€‚

```shell
npm install react@latest react-dom@latest next@latest
```

æ‰§è¡Œå®Œæˆåï¼Œå°±å®‰è£…äº† `next`ã€ `react` å’Œ `react-dom` åŒ…ã€‚

æˆ‘ä»¬å¯¹é¡¹ç›®è¿›è¡Œä¸€å®šæ›´æ”¹åï¼Œå‘ç°å…¶å® `useState` æ— æ³•ä½¿ç”¨äº†ï¼Œè¿™æ˜¯å› ä¸º Next.js ç”¨äº† React Server Componentsï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦ç”¨ Client ç»„ä»¶ã€‚

## æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç¯å¢ƒ

React æœ‰ä¸¤ç§ç¯å¢ƒï¼šæœåŠ¡å™¨ç¯å¢ƒï¼ˆServerï¼‰å’Œå®¢æˆ·ç«¯ç¯å¢ƒï¼ˆClientï¼‰ã€‚

- **å®¢æˆ·ç«¯** æ˜¯æŒ‡ç”¨æˆ·è®¾å¤‡ä¸Šå‘æœåŠ¡å™¨å‘é€åº”ç”¨ç¨‹åºä»£ç è¯·æ±‚çš„æµè§ˆå™¨ã€‚ç„¶åï¼Œå®ƒå°†ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”è½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„æ¥å£ã€‚
- **æœåŠ¡å™¨** æ˜¯æŒ‡æ•°æ®ä¸­å¿ƒä¸­çš„è®¡ç®—æœºï¼Œç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºä»£ç ã€æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€æ‰§è¡Œä¸€äº›è®¡ç®—å¹¶å‘å›é€‚å½“çš„å“åº”ã€‚

åœ¨ React ä¸­ï¼Œå¯ä»¥é€‰æ‹©åœ¨ç»„ä»¶æ ‘ä¸­æ”¾ç½®ç½‘ç»œè¾¹ç•Œçš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šè·å–æ•°æ®å¹¶å‘ˆç°ç”¨æˆ·çš„å¸–å­ï¼ˆä½¿ç”¨ Server Componentsï¼‰ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯ä¸Šä¸ºæ¯ä¸ªå¸–å­å‘ˆç°äº¤äº’å¼ LikeButtonï¼ˆä½¿ç”¨ Client Componentsï¼‰ã€‚

![alt text](./img/module.png)

åœ¨å¹•åï¼Œç»„ä»¶è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ªæ¨¡å—å›¾ã€‚æœåŠ¡å™¨æ¨¡å—å›¾ï¼ˆæˆ–æ ‘ï¼‰åŒ…å«åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“çš„æ‰€æœ‰æœåŠ¡å™¨ç»„ä»¶ï¼Œå®¢æˆ·ç«¯æ¨¡å—å›¾ï¼ˆæˆ–æ ‘ï¼‰åŒ…å«æ‰€æœ‰å®¢æˆ·ç«¯ç»„ä»¶ã€‚

æœåŠ¡å™¨ç»„ä»¶æ¸²æŸ“åï¼Œä¸€ç§ç§°ä¸º **React æœåŠ¡å™¨ç»„ä»¶æœ‰æ•ˆè´Ÿè½½ ï¼ˆRSCï¼‰** çš„ç‰¹æ®Šæ•°æ®æ ¼å¼è¢«å‘é€åˆ°å®¢æˆ·ç«¯ï¼š

- 1ã€Server Component çš„æ¸²æŸ“ç»“æœï¼›
- 2ã€å®¢æˆ·ç«¯ç»„ä»¶åº”å‘ˆç°ä½ç½®çš„å ä½ç¬¦ä»¥åŠå¯¹å…¶ JavaScript æ–‡ä»¶çš„å¼•ç”¨ã€‚

React ç”¨è¿™äº›ä¿¡æ¯æ¥åˆ›å»ºä¸€ä¸ª **React æ ‘**ï¼Œè¯¥æ ‘åŒ…å«æ‰€æœ‰å®¢æˆ·ç«¯ç»„ä»¶ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯ JavaScript ä»£ç ä»æœåŠ¡å™¨åŠ è½½ï¼Œå¹¶ä½¿ç”¨ React æ ‘ã€‚

## ä½¿ç”¨å®¢æˆ·ç«¯ç»„ä»¶

å°† `LikeButton` éš”ç¦»å‡ºæ¥ï¼Œå¹¶ç”¨ `use client` è®©å…¶æˆä¸ºå®¢æˆ·ç«¯ç»„ä»¶ï¼Œè¿™æ · React å°±ä¼šåœ¨å®¢æˆ·ç«¯æ¸²æŸ“è¯¥ç»„ä»¶ï¼š

```js
"use client";

import { useState } from "react";

export default function LikeButton() {
  const [likes, setLikes] = useState(0);

  function handleClick() {
    setLikes(likes + 1);
  }

  return <button onClick={handleClick}>Like ({likes})</button>;
}
```

é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥åªéœ€è¦åœ¨ä¸»ç•Œé¢æŠŠ `LikeButton` å¼•å…¥å°±å¥½äº†ã€‚

Keep learning form React Documentation
